<script type="text/javascript">
    Ext.onReady(function() {

        /**
         * tree
         * 在这里添加树节点
         */
        var treepanel = Ext.create('Ext.tree.Panel', {
            id: 'treeview',
            rootVisible: true,
            border: false,
            autoScroll: true,
            bodyStyle: 'margin-top: -1px; overflow-x:scroll; overflow-y:scroll;',
            store: Ext.create('Ext.data.TreeStore', {
                root: {
                    text: '我的权限',
                    border:false,
                    expanded: true,
                    children: [{
                        text: "增值税（一般纳税人使用）",
                        expanded: true,
                        children: [{
                            text: "增值纳税申报表（一般纳税人使用）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table1"
                        },{
                            text: "增值纳税申报表附列资料（一）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table2"
                        },{
                            text: "增值纳税申报表附列资料（二）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table3"
                        },{
                            text: "增值纳税申报表附列资料（三）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table4"
                        },{
                            text: "增值纳税申报表附列资料（四）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table5"
                        },{
                            text: "固定资产进项税额抵扣情况表",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table6"
                        },{
                            text: "增值税运输发票",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table7"
                        },{
                            text: "增值纳税申报表附列资料（一）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table8"
                        },{
                            text: "增值纳税申报表附列资料（一）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table9"
                        }]
                    }]
                }
            })
        });

        var tabpanel = new Ext.TabPanel({
            id: 'tabpanel',
            deferredRender: true,
            activeTab: 0,
            items: [
                {
                    title: '我的主页',
                    html: '<iframe frameborder="0" src="__APP__/Home/Default/home"  width="100%" height="100%"></iframe>',
                    icon: 'home'
                }
            ]
        });

        treepanel.on({
            //单击事件
            'itemclick': function(view, rcd, item, idx, event, eOpts) {
                var url = rcd.get('url');
                var text = rcd.get('text');
                if (url) {
                    var items = tabpanel.items.items;
                    for (var i=0; i< items.length; i++) {
                        if (items[i].title == text && items[i].url == url) {
                            tabpanel.setActiveTab(i);
                            return;
                        }
                    }
                    tabpanel.add({
                        url: url,
                        title: text,
                        closable: true,
                        html: "<iframe frameborder='0' scrolling='no' width='100%' height='100%' style='background-color: #E6E4D1; margin:0;padding:0' src="+url+"></iframe>"
                    }).show();
                }
            }
        });

        var viewPort = new Ext.Viewport({
            layout: "border",
            renderTo: Ext.getBody(),
            items: [{
                id:"north",
                region: "north",
                border: false,
                height: 86,
                bodyStyle: 'background: #E7F1F2;',
                html: '<iframe src="__APP__/Home/Default/top" height="100%" width="100%" frameborder="0" scrolling="no"></iframe>'
            },{
                id:"south",
                region: "south",
                border: false,
                height: 27,
                bodyStyle: 'background: #E7F1F2',
                html: '<div style="padding-top: 5px; padding-right: 30px; text-align: right;">技术支持：航天金穗 河南百旺</div>'
            },{
                id: "east",
                region: "east",
                border: false,
                width: 5,
                bodyStyle: 'background: #E7F1F2'
            },{
                id: "west",
                title: '<b style="color: #000;">功能菜单</b>',
                region: "west",
                split: true,
                collapsible: true,
                width: 300,
                items: [treepanel],
                layout: 'fit'
            },{
                id: 'center',
                region: "center",
                split: false,
                border: false,
                bodyStyle: 'background: #E7F1F2',
                items: [tabpanel],
                layout: 'fit'
            }]
        });
     });



</script>