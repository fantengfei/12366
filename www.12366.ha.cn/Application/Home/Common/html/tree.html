<script type="text/javascript">
    Ext.onReady(function() {

        var tabpanel = new Ext.TabPanel({
            id: 'tabpanel',
            deferredRender: true,
            activeTab: 0,
            items: [
                {
                    title: '我的主页',
                    html: '<iframe frameborder="0" src="__COMMON__/html/home.html"  width="100%" height="100%"></iframe>',
                    icon: 'home'
                }
            ]
        });

        var viewPort = new Ext.Viewport({
            layout: "border",
            renderTo: Ext.getBody(),
            items: [{
                id:"north",
                region: "north",
                border: false,
                height: 100,
                bodyStyle: 'background: #DDEAEB',
                html: '<iframe frameborder="0" src="__COMMON__/html/top.html" height="100%" width="100%"></iframe>'
            },{
                id:"south",
                region: "south",
                border: false,
                height: 27,
                bodyStyle: 'background: #DDEAEB',
                html: '<div style="padding-top: 5px; padding-right: 30px; text-align: right;">技术支持：航天金穗 河南百旺</div>'
            },{
                id: "east",
                region: "east",
                border: false,
                width: 5,
                bodyStyle: 'background: #DDEAEB'
            },{
                id: "west",
                title: '功能菜单',
                region: "west",
                split: true,
                collapsible: true,
                width: 300,
                bodyStyle: 'background: #DDEAEB',
                html:'<div id="div-west"></div>'
            },{
                id: 'center',
                region: "center",
                split: false,
                border: false,
                bodyStyle: 'background: #DDEAEB',
                items: tabpanel
            }]
        });

        // 设置tabpanel的高度
        tabpanel.setHeight(Ext.get('center').getHeight());


        /**
         * tree
         * 在这里添加树节点
         */
        var treepanel = Ext.create('Ext.tree.Panel', {
            id: 'treeview',
            rootVisible: true,
            border: false,
            height: Ext.get('west').getHeight(),
            renderTo: 'div-west',
            store: Ext.create('Ext.data.TreeStore', {
                root: {
                    text: '我的权限',
                    expanded: true,
                    children: [{
                        text: "增值税（一般纳税人使用）",
                        expanded: true,
                        children: [{
                            text: "增值纳税申报表（一般纳税人使用）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table1"
                        },{
                            text: "增值纳税申报表附列资料（一）",
                            leaf: true,
                            url: "__APP__/Home/TableNode1/table2"
                        }]
                    }]
                }
            })
        });

        treepanel.on({
            //单击事件
            'itemclick': function(view, rcd, item, idx, event, eOpts) {
                var url = rcd.get('url');
                var text = rcd.get('text');
                if (url) {
                    var items = tabpanel.items.items;
                    for (var i=0; i< items.length; i++) {
                        if (items[i].title == text && items[i].url == url) {
                            tabpanel.setActiveTab(i);
                            return;
                        }
                    }
                    tabpanel.add({
                        url: url,
                        title: text,
                        closable: true,
                        html: "<iframe frameborder='0' scrolling='yes' width='100%' height='100%' style='background-color: #E6E4D1;' src="+url+"></iframe>"
                    }).show();
                }
            }
        });

     });

</script>